/* यह पूरा एकीकृत JavaScript कोड यहाँ पेस्ट करें */
(function(){"use strict";const e={playerVideos:[],currentVideoIndex:0,autoOpenTimer:null,isAutoOpenCancelled:!1,COUNTDOWN_SECONDS:5,init:function(){const e=document.getElementById("agp-auto-open-btn");e&&(this.parseData(),0!==this.playerVideos.length&&(e.addEventListener("click",()=>{this.isAutoOpenCancelled?this.openPlayer():(this.cancelAutoOpen(),this.openPlayer())}),e.addEventListener("dblclick",e=>{e.preventDefault(),this.isAutoOpenCancelled||this.cancelAutoOpen()}),this.startCountdown()))},parseData:function(){const e=document.getElementById("agp-video-data");e&&e.querySelectorAll("div[data-platform]").forEach(e=>{const t=e.dataset.platform,o=e.dataset.embedUrl;e.querySelectorAll("i").forEach(e=>{this.playerVideos.push({platform:t,id:e.dataset.id,title:e.dataset.title,embedUrl:o})})})},startCountdown:function(){if(this.isAutoOpenCancelled)return;const e=document.getElementById("agp-timer-overlay");e&&(e.style.display="flex"),this.autoOpenTimer=setTimeout(()=>{this.isAutoOpenCancelled||this.openPlayer()},1e3*this.COUNTDOWN_SECONDS)},cancelAutoOpen:function(){this.isAutoOpenCancelled=!0,clearTimeout(this.autoOpenTimer);const e=document.getElementById("agp-timer-overlay");e&&(e.style.display="none")},openPlayer:function(e=0){const t=document.getElementById("agp-video-player-modal");if(t&&0!==this.playerVideos.length){this.cancelAutoOpen(),t.style.display="block",document.body.style.overflow="hidden",this.renderDropdown(),this.loadVideo(e,!0)}else 0===this.playerVideos.length&&alert("कोई वीडियो उपलब्ध नहीं है।")},closePlayer:function(){const e=document.getElementById("agp-video-player-modal");e&&(e.style.display="none");const t=document.getElementById("agp-video-main-area");t&&(t.innerHTML='<button class="agp-video-nav agp-video-prev" onclick="agp_slideVideo(-1)"><i class="fa fa-chevron-left"></i></button><button class="agp-video-nav agp-video-next" onclick="agp_slideVideo(1)"><i class="fa fa-chevron-right"></i></button>'),document.body.style.overflow="auto"},loadVideo:function(e,t=!0){this.currentVideoIndex=e;const o=this.playerVideos[e],n=document.getElementById("agp-video-modal-title");n&&(n.textContent=o.title);const i=document.getElementById("agp-video-main-area"),a=i.querySelector("iframe");a&&a.remove();const l=document.createElement("iframe");l.setAttribute("frameborder","0"),l.setAttribute("allowfullscreen",""),l.setAttribute("allow","autoplay; fullscreen");let s="";s="youtube"===o.platform?`${o.embedUrl}${o.id}?autoplay=${t?1:0}&mute=0&rel=0`:`${o.embedUrl}${o.id}?autoplay=${t?1:0}`,l.src=s,i.prepend(l),this.updateDropdownActive()},renderDropdown:function(){const e=document.getElementById("agp-video-dropdown-menu");e.innerHTML="",this.playerVideos.forEach((t,o)=>{const n=document.createElement("div");n.className="agp-video-dropdown-item",n.textContent=t.title,n.onclick=()=>{this.loadVideo(o,!0),e.classList.remove("open")},e.appendChild(n)})},updateDropdownActive:function(){const e=document.getElementById("agp-video-dropdown-menu");Array.from(e.children).forEach((e,t)=>{e.classList.toggle("active-video-item",t===this.currentVideoIndex)})},toggleDropdown:function(){document.getElementById("agp-video-dropdown-menu").classList.toggle("open")},slide:function(e){const t=(this.currentVideoIndex+e+this.playerVideos.length)%this.playerVideos.length;this.loadVideo(t,!0)}},t={galleryData:[],currentSlideIndex:0,postURLForShare:"",init:function(){const e=document.querySelector(".agp-image-gallery");e&&(this.parseData(),this.galleryData.length>0&&this.displaySlide(0))},parseData:function(){const e=document.getElementById("agp-gallery-config");e&&(this.postURLForShare=e.dataset.postUrl||"");const t=document.getElementById("agp-gallery-items-data");t&&t.querySelectorAll(".item").forEach(e=>{this.galleryData.push({src:e.dataset.src||"",title:e.dataset.title||"",description:e.dataset.description||""})})},displaySlide:function(e){if(!(e<0||e>=this.galleryData.length)){const t=this.galleryData[e],o=document.getElementById("agp-main-image");o.classList.add("fade-out"),setTimeout(()=>{o.src=t.src,o.alt=t.title,o.style.animation="none",o.offsetHeight,o.style.animation=null,o.classList.remove("fade-out");const e=document.getElementById("agp-image-counter");e&&(e.innerText=`${this.currentSlideIndex+1} / ${this.galleryData.length}`)},300),document.getElementById("agp-image-title").innerText=t.title||"",document.getElementById("agp-image-description").innerText=t.description||""}},navigate:function(e){this.currentSlideIndex+=e,this.currentSlideIndex>=this.galleryData.length&&(this.currentSlideIndex=0),this.currentSlideIndex<0&&(this.currentSlideIndex=this.galleryData.length-1),this.displaySlide(this.currentSlideIndex)},share:async function(){const e=this.galleryData[this.currentSlideIndex];if(e&&this.postURLForShare){const t={title:document.title,text:`यह तस्वीर देखें: ${e.title}`,url:this.postURLForShare};try{await navigator.share(t)}catch(e){}}},showDownloadToast:function(){const e=document.getElementById("agp-download-toast");e.className="agp-toast show",setTimeout(()=>{e.className=e.className.replace("show","")},4e3)}};window.agp_openVideoPlayer=()=>e.openPlayer(),window.agp_closeVideoPlayer=()=>e.closePlayer(),window.agp_toggleVideoDropdown=()=>e.toggleDropdown(),window.agp_slideVideo=t=>e.slide(t),window.agp_navigateImage=e=>t.navigate(e),window.agp_shareImage=()=>t.share(),window.agp_showDownloadToast=()=>t.showDownloadToast(),document.addEventListener("DOMContentLoaded",()=>{e.init(),t.init()}),document.addEventListener("keydown",t=>{const o=document.getElementById("agp-video-player-modal");o&&"block"===o.style.display&&"Escape"===t.key&&e.closePlayer()})})();
